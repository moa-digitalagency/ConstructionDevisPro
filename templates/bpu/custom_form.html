{% extends "base.html" %}
{% block title %}{% if article %}Modifier{% else %}Nouvel{% endif %} article{% endblock %}
{% block page_title %}{% if article %}Modifier{% else %}Nouvel{% endif %} article personnalisé{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <div class="mb-6">
        <a href="{{ url_for('bpu.custom_articles') }}" class="text-gray-500 hover:text-gray-700">
            <i class="fas fa-arrow-left mr-2"></i> Retour aux articles personnalisés
        </a>
    </div>
    
    <div class="bg-white rounded-xl shadow p-8">
        <form method="POST" class="space-y-6">
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <label for="code" class="block text-sm font-medium text-gray-700 mb-1">Code *</label>
                    <input type="text" id="code" name="code" required value="{{ article.code if article else '' }}"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
                           placeholder="PERSO-001">
                </div>
                <div>
                    <label for="unit" class="block text-sm font-medium text-gray-700 mb-1">Unité *</label>
                    <select id="unit" name="unit" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        <option value="m²" {% if article and article.unit == 'm²' %}selected{% endif %}>m²</option>
                        <option value="ml" {% if article and article.unit == 'ml' %}selected{% endif %}>ml</option>
                        <option value="m³" {% if article and article.unit == 'm³' %}selected{% endif %}>m³</option>
                        <option value="u" {% if article and article.unit == 'u' %}selected{% endif %}>u (unité)</option>
                        <option value="ens" {% if article and article.unit == 'ens' %}selected{% endif %}>ens (ensemble)</option>
                        <option value="kg" {% if article and article.unit == 'kg' %}selected{% endif %}>kg</option>
                        <option value="t" {% if article and article.unit == 't' %}selected{% endif %}>t (tonne)</option>
                        <option value="h" {% if article and article.unit == 'h' %}selected{% endif %}>h (heure)</option>
                        <option value="j" {% if article and article.unit == 'j' %}selected{% endif %}>j (jour)</option>
                    </select>
                </div>
            </div>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <label for="category" class="block text-sm font-medium text-gray-700 mb-1">Catégorie *</label>
                    <input type="text" id="category" name="category" required value="{{ article.category if article else '' }}"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
                           placeholder="Gros Œuvre, Second Œuvre...">
                </div>
                <div>
                    <label for="subcategory" class="block text-sm font-medium text-gray-700 mb-1">Sous-catégorie</label>
                    <input type="text" id="subcategory" name="subcategory" value="{{ article.subcategory if article else '' }}"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
                           placeholder="Fondations, Peinture...">
                </div>
            </div>
            
            <div>
                <label for="designation" class="block text-sm font-medium text-gray-700 mb-1">Désignation *</label>
                <textarea id="designation" name="designation" required rows="2"
                          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
                          placeholder="Description détaillée de l'article...">{{ article.designation if article else '' }}</textarea>
            </div>
            
            <div class="grid md:grid-cols-3 gap-6">
                <div>
                    <label for="price_eco" class="block text-sm font-medium text-gray-700 mb-1">Prix Éco</label>
                    <input type="number" id="price_eco" name="price_eco" step="0.01" value="{{ article.unit_price_eco if article else '' }}"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
                           placeholder="0.00">
                </div>
                <div>
                    <label for="price_std" class="block text-sm font-medium text-gray-700 mb-1">Prix Standard</label>
                    <input type="number" id="price_std" name="price_std" step="0.01" value="{{ article.unit_price_standard if article else '' }}"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
                           placeholder="0.00">
                </div>
                <div>
                    <label for="price_prem" class="block text-sm font-medium text-gray-700 mb-1">Prix Premium</label>
                    <input type="number" id="price_prem" name="price_prem" step="0.01" value="{{ article.unit_price_premium if article else '' }}"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
                           placeholder="0.00">
                </div>
            </div>
            
            <div class="flex items-center justify-end space-x-4 pt-4">
                <a href="{{ url_for('bpu.custom_articles') }}" class="px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition">
                    Annuler
                </a>
                <button type="submit" class="px-6 py-3 bg-primary text-white rounded-lg font-medium hover:bg-secondary transition">
                    <i class="fas fa-save mr-2"></i> Enregistrer
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
